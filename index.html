<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NeuraMind AI</title>
<style>
  /* =========================
        GENERAL STYLES
  ========================= */
  body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; color: #111; margin:0; display:flex; flex-direction:column; height:100vh;}
  header { display:flex; align-items:center; padding:12px 20px; background:#3a71ff; color:white; }
  header img { width:40px; height:40px; margin-right:12px; }
  header h1 { font-size:1.3rem; margin:0; }

  #login-screen, #about-screen { display:flex; flex-direction:column; align-items:center; justify-content:center; flex:1; gap:12px; }
  #login-screen input { padding:10px; border-radius:8px; border:1px solid #ccc; width:200px; }
  #login-screen button { padding:10px 16px; border:none; border-radius:8px; background:#3a71ff; color:white; cursor:pointer; }

  #chat-container { display:flex; flex-direction:column; height:100vh; }
  #chat { padding:16px; height:70vh; overflow-y:auto; border-bottom:1px solid #ccc; flex-grow:1; }
  .message { max-width:70%; padding:10px 14px; margin-bottom:12px; border-radius:12px; word-wrap:break-word; }
  .you { background:#dce4ff; margin-left:auto; }
  .ai { background:#fff; margin-right:auto; }
  .typing { font-style:italic; opacity:0.7; }

  #input-area { display:flex; padding:12px; gap:8px; background:white; }
  #msg { flex:1; padding:10px; border-radius:10px; border:1px solid #aaa; }
  #send { padding:10px 14px; border-radius:10px; border:none; background:#3a71ff; color:white; cursor:pointer; }
  #about { padding:16px; font-size:0.95rem; background:#eef2ff; margin:12px; border-radius:8px; }

</style>
</head>
<body>

<header>
  <!-- Logo SVG -->
  <svg width="40" height="40" viewBox="0 0 100 100" fill="white" xmlns="http://www.w3.org/2000/svg">
    <circle cx="50" cy="50" r="45" stroke="white" stroke-width="5" fill="#3a71ff"/>
    <path d="M50 20 L65 80 L50 65 L35 80 Z" fill="white"/>
  </svg>
  <h1>NeuraMind AI</h1>
</header>

<!-- LOGIN SCREEN -->
<div id="login-screen">
  <h2>Welcome to NeuraMind AI</h2>
  <input type="text" id="username" placeholder="Enter your name">
  <button id="login-btn">Start Chat</button>
</div>

<!-- CHAT INTERFACE -->
<div id="chat-container" style="display:none;">
  <div id="chat"></div>
  <div id="input-area">
    <input id="msg" placeholder="Ask NeuraMind AI anything...">
    <button id="send">Send</button>
  </div>
  <div id="about">
    <strong>About NeuraMind AI:</strong> This offline smart AI remembers your preferences, learns your likes, and responds intelligently. All data is stored locally. Built for personal assistant tasks and fun conversations!
  </div>
</div>

<script>
// ======================================================
//        NEURAMIND AI — Fully Offline
// ======================================================

const AI_SETTINGS = {
  name: "NeuraMind AI",
  personality: "calm, intelligent, friendly deep-voiced assistant",
  memoryEnabled: true,
  historyLimit: 50
};

let memory = JSON.parse(localStorage.getItem("ai_memory") || "{}");
let chatHistory = JSON.parse(localStorage.getItem("ai_chat") || []);
let maleVoice = null;

// Load voice
function loadVoice() {
  const voices = speechSynthesis.getVoices();
  maleVoice = voices.find(v => /Male|David|Daniel|Alex|Google UK English Male/i.test(v.name)) || voices[0];
}
speechSynthesis.onvoiceschanged = loadVoice;
function speak(text) {
  const u = new SpeechSynthesisUtterance(text);
  u.voice = maleVoice;
  u.pitch = 0.75;
  u.rate = 1;
  speechSynthesis.speak(u);
}

function saveMemory() { localStorage.setItem("ai_memory", JSON.stringify(memory)); }
function updateMemory(userMsg) {
  const m = userMsg.toLowerCase();
  if (m.includes("my name is")) { memory.username = userMsg.split("my name is")[1].trim(); saveMemory(); }
  if (m.includes("i like")) { memory.likes = memory.likes || []; memory.likes.push(userMsg.split("i like")[1].trim()); saveMemory(); }
}

function smartOfflineAI(userMsg) {
  userMsg = userMsg.trim();
  const lower = userMsg.toLowerCase();
  let response = "";

  if (memory.username) response += `Hey ${memory.username}, `;
  if (memory.likes && memory.likes.length > 0) response += `I remember you like ${memory.likes.join(", ")}. `;

  const recent = chatHistory.slice(-5).map(m => m.text).join(" ");

  if (lower.includes("why")) return response + "Here's why: " + (recent || "It makes sense logically.");
  if (lower.includes("how")) return response + "Let's break it down: " + (recent || "Step by step, here's what I think.");
  if (lower.includes("what")) return response + "Here's what I understand: " + (recent || "Let me explain.");
  if (lower.includes("who")) return response + "Depends on the context. " + (recent || "Could you clarify?");
  if (lower.includes("when")) return response + "Timing varies. " + (recent || "It depends on circumstances.");
  if (lower.includes("help") || lower.includes("problem")) return response + "I’m here to help. " + (recent || "Let's work on it together.");

  return response + "Interesting! " + (recent ? "Earlier you said: " + recent : "Tell me more so I can understand.");
}

function smartAI(userMsg) {
  updateMemory(userMsg);
  return smartOfflineAI(userMsg);
}

// ======================================================
// CHAT UI
// ======================================================

const chat = document.getElementById("chat");
const msg = document.getElementById("msg");

// Add message
function addMessage(text, who) {
  const div = document.createElement("div");
  div.className = `message ${who}`;
  div.textContent = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;

  chatHistory.push({role: who, text});
  localStorage.setItem("ai_chat", JSON.stringify(chatHistory));
}

// Replay history
chatHistory.forEach(m => addMessage(m.text, m.role));

// Run AI
function runAI() {
  const text = msg.value.trim();
  if (!text) return;

  addMessage(text, "you");
  msg.value = "";

  const typing = document.createElement("div");
  typing.className = "message ai typing";
  typing.textContent = "NeuraMind AI is thinking...";
  chat.appendChild(typing);
  chat.scrollTop = chat.scrollHeight;

  setTimeout(() => {
    const reply = smartAI(text);
    typing.remove();
    addMessage(reply, "ai");
    speak(reply);
  }, 500);
}

// Event listeners
document.getElementById("send").onclick = runAI;
msg.onkeydown = e => { if (e.key === "Enter") runAI(); };

// ======================================================
// LOGIN LOGIC
// ======================================================
const loginScreen = document.getElementById("login-screen");
const chatContainer = document.getElementById("chat-container");
const loginBtn = document.getElementById("login-btn");
const usernameInput = document.getElementById("username");

loginBtn.onclick = () => {
  const name = usernameInput.value.trim();
  if (!name) return alert("Please enter your name!");
  memory.username = name;
  saveMemory();
  loginScreen.style.display = "none";
  chatContainer.style.display = "flex";
  addMessage(`Hello ${name}, I'm NeuraMind AI. Ask me anything!`, "ai");
};

</script>

</body>
</html>
